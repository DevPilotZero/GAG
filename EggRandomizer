--// Services
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

--// Pet List
local specialPets = {
    "Queen Bee", "Mimic Octopus", "Raccoon", "Disco Bee", "Jackal God",
    "T-Rex", "Spinosaurus", "Dragonfly", "Butterfly", "Kitsune"
}

local eggPets = {
    ["Bee Egg"] = {"Bee","Honey Bee","Bear Bee","Petal Bee","Queen Bee"},
    ["Common Egg"] = {"Golden Lab","Dog","Bunny"},
    ["Mythical Egg"] = {"Grey Mouse","Brown Mouse","Squirrel","Red Giant Ant","Red Fox"},
    ["Bug Egg"] = {"Snail","Giant Ant","Caterpillar","Praying Mantis","Dragonfly"},
    ["Common Summer Egg"] = {"Starfish","Seagull","Crab"},
    ["Rare Summer Egg"] = {"Flamingo","Toucan","Sea Turtle","Orangutan","Seal"},
    ["Paradise Egg"] = {"Ostrich","Peacock","Capybara","Scarlet Macaw","Mini Octopus"},
    ["Legendary Egg"] = {"Cow","Silver Monkey","Sea Otter","Turtle","Polar Bear"},
    ["Rare Egg"] = {"Orange Tabby","Spotted Deer","Pig","Rooster","Monkey"},
    ["Uncommon Egg"] = {"Black Bunny","Chicken","Cat","Deer"},
    ["Night Egg"] = {"Hedgehog","Mole","Frog","Echo Frog","Night Owl","Raccoon"},
    ["Anti Bee Egg"] = {"Wasp","Tarantula Hawk","Moth","Butterfly","Disco Bee"},
    ["Oasis Egg"] = {"Fennec Fox","Meerkat","Cooked Owl","Axolotl","Snake","Jackal God"},
    ["Dinosaur Egg"] = {"Raptor","Triceratops","Stegosaurus","Pterodactyl","Brontosaurus","T-Rex"},
    ["Primal Egg"] = {"Parasaurolophus","Iguanodon","Pachycephalosaurus","Dilophosaurus","Ankylosaurus","Spinosaurus"}
}

--// UI Setup
local gui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
gui.Name = "PetRandomizerUI"
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 320, 0, 250)
mainFrame.Position = UDim2.new(0.05, 0, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 35, 40)
mainFrame.Active = true
mainFrame.Draggable = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)

local title = Instance.new("TextLabel", mainFrame)
title.Text = "🐾 Pet Randomizer"
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.new(1, 1, 1)
title.Font = Enum.Font.FredokaOne
title.TextSize = 20

local statusText = Instance.new("TextLabel", mainFrame)
statusText.Size = UDim2.new(1, -20, 0, 24)
statusText.Position = UDim2.new(0, 10, 0, 40)
statusText.Text = ""
statusText.TextColor3 = Color3.fromRGB(0, 255, 0)
statusText.BackgroundTransparency = 1
statusText.Font = Enum.Font.FredokaOne
statusText.TextSize = 16

local randomBtn = Instance.new("TextButton", mainFrame)
randomBtn.Size = UDim2.new(1, -40, 0, 35)
randomBtn.Position = UDim2.new(0, 20, 0, 80)
randomBtn.BackgroundColor3 = Color3.fromRGB(0, 162, 255)
randomBtn.TextColor3 = Color3.new(1, 1, 1)
randomBtn.Text = "Randomize in: 7"
randomBtn.Font = Enum.Font.FredokaOne
randomBtn.TextSize = 16
Instance.new("UICorner", randomBtn).CornerRadius = UDim.new(0, 8)

local autoBtn = Instance.new("TextButton", mainFrame)
autoBtn.Size = UDim2.new(1, -40, 0, 30)
autoBtn.Position = UDim2.new(0, 20, 0, 125)
autoBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
autoBtn.TextColor3 = Color3.new(1, 1, 1)
autoBtn.Text = "✔ Auto Randomize: ON"
autoBtn.Font = Enum.Font.FredokaOne
autoBtn.TextSize = 14
Instance.new("UICorner", autoBtn).CornerRadius = UDim.new(0, 8)

local espBtn = Instance.new("TextButton", mainFrame)
espBtn.Size = UDim2.new(1, -40, 0, 30)
espBtn.Position = UDim2.new(0, 20, 0, 165)
espBtn.BackgroundColor3 = Color3.fromRGB(85, 0, 255)
espBtn.TextColor3 = Color3.new(1, 1, 1)
espBtn.Text = "✔ Pet ESP: ON"
espBtn.Font = Enum.Font.FredokaOne
espBtn.TextSize = 14
Instance.new("UICorner", espBtn).CornerRadius = UDim.new(0, 8)

--// Core Variables
local petESP = true
local autoRandomize = true
local countdown = 7

--// ESP Logic
local function updateESP(model, petName, isSpecial)
    local labelGui = model:FindFirstChild("PetESP")
    if not labelGui and petESP then
        labelGui = Instance.new("BillboardGui", model)
        labelGui.Name = "PetESP"
        labelGui.Size = UDim2.new(0, 100, 0, 30)
        labelGui.AlwaysOnTop = true
        labelGui.StudsOffset = Vector3.new(0, 2.5, 0)

        local label = Instance.new("TextLabel", labelGui)
        label.Size = UDim2.new(1, 0, 1, 0)
        label.BackgroundTransparency = 1
        label.Text = petName
        label.TextColor3 = isSpecial and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 255, 255)
        label.Font = Enum.Font.FredokaOne
        label.TextScaled = true
    elseif labelGui then
        labelGui.Enabled = petESP
    end
end

local function pickPet(petList)
    local special, normal = {}, {}
    for _, pet in ipairs(petList) do
        if table.find(specialPets, pet) then
            table.insert(special, pet)
        else
            table.insert(normal, pet)
        end
    end
    return (#special > 0 and math.random(100) <= 5) and special[math.random(#special)] or normal[math.random(#normal)]
end

local function randomizePets()
    for _, obj in pairs(Workspace:GetDescendants()) do
        if obj:IsA("Model") and eggPets[obj.Name] then
            local chosen = pickPet(eggPets[obj.Name])
            local isSpecial = table.find(specialPets, chosen) ~= nil
            updateESP(obj, chosen, isSpecial)
            if isSpecial then
                statusText.Text = "YOU GOT A SPECIAL PET!"
                autoRandomize = false
                autoBtn.Text = "✖ Auto Randomize: OFF"
                autoBtn.BackgroundColor3 = Color3.fromRGB(170, 0, 0)
            end
        end
    end
end

--// Button Connections
autoBtn.MouseButton1Click:Connect(function()
    autoRandomize = not autoRandomize
    autoBtn.Text = autoRandomize and "✔ Auto Randomize: ON" or "✖ Auto Randomize: OFF"
    autoBtn.BackgroundColor3 = autoRandomize and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(170, 0, 0)
end)

espBtn.MouseButton1Click:Connect(function()
    petESP = not petESP
    espBtn.Text = petESP and "✔ Pet ESP: ON" or "✖ Pet ESP: OFF"
    espBtn.BackgroundColor3 = petESP and Color3.fromRGB(85, 0, 255) or Color3.fromRGB(100, 100, 100)
    for _, model in pairs(Workspace:GetDescendants()) do
        local gui = model:FindFirstChild("PetESP")
        if gui then gui.Enabled = petESP end
    end
end)

-- Auto Randomizer Loop
task.spawn(function()
    while true do
        if autoRandomize then
            randomBtn.Text = "Randomize in: " .. countdown
            task.wait(1)
            countdown -= 1
            if countdown <= 0 then
                randomizePets()
                countdown = 7
            end
        else
            randomBtn.Text = "Randomizer Paused"
            task.wait(0.5)
        end
    end
end)
